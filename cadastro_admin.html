<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Criar Conta de Administrador | D'Barber Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-neutral-900 text-gray-200 font-sans min-h-screen">

    <main class="max-w-md mx-auto mt-20 p-6 bg-neutral-800 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-6 text-center">Cadastro de Administrador</h2>

        <!-- Mensagem de erro -->
        <div id="erro" class="text-center text-red-500 mb-4"></div>

        <form action="database/criar_admin.php" method="POST" class="space-y-6">
            <div>
                <label for="nome" class="block mb-2 font-semibold">Nome</label>
                <input type="text" name="nome" id="nome" required
                    class="w-full px-4 py-2 rounded bg-neutral-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-amber-500">
            </div>

            <div>
                <label for="email" class="block mb-2 font-semibold">E-mail</label>
                <input type="email" name="email" id="email" required
                    class="w-full px-4 py-2 rounded bg-neutral-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-amber-500">
            </div>

            <div>
                <label for="senha" class="block mb-2 font-semibold">Senha</label>
                <input type="password" name="senha" id="senha" required
                    class="w-full px-4 py-2 rounded bg-neutral-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-amber-500">
            </div>

            <div>
                <label for="confirmar_senha" class="block mb-2 font-semibold">Confirmar senha</label>
                <input type="password" name="confirmar_senha" id="confirmar_senha" required
                    class="w-full px-4 py-2 rounded bg-neutral-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-amber-500">
            </div>
            <div id="aviso-senha" class="text-red-500 text-sm mt-1 hidden">
                As senhas não coincidem.
            </div>

            <div>
                <label for="codigo_autorizacao" class="block mb-2 font-semibold">Código de autorização</label>
                <input type="text" name="codigo_autorizacao" id="codigo_autorizacao" required
                    class="w-full px-4 py-2 rounded bg-neutral-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-amber-500">
            </div>

            <div class="text-center">
                <button type="submit"
                    class="bg-amber-500 hover:bg-yellow-600 text-black font-bold px-6 py-3 rounded-full">
                    Criar Conta
                </button>
            </div>
        </form>
    </main>

    <script>
        const params = new URLSearchParams(window.location.search);
        if (params.get("erro") === "codigo") {
            document.getElementById("erro").textContent = "Código de autorização inválido ou já utilizado.";
        } else if (params.get("erro") === "email") {
            document.getElementById("erro").textContent = "E-mail já cadastrado.";
        } else if (params.get("erro") === "senha") {
            document.getElementById("erro").textContent = "As senhas não coincidem.";
        }

        const senha = document.getElementById("senha");
        const confirmar = document.getElementById("confirmar_senha");
        const aviso = document.getElementById("aviso-senha");

        function validarSenhas() {
            if (confirmar.value !== senha.value) {
                aviso.classList.remove("hidden");
            } else {
                aviso.classList.add("hidden");
            }
        }

        senha.addEventListener("input", validarSenhas);
        confirmar.addEventListener("input", validarSenhas);
    </script>


</body>

</html>